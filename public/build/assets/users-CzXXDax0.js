import{r as x,x as D,j as s,Q as J,S as k}from"./app-BCw1tvXf.js";import{S as W,H as Y}from"./layout-CYJpAYOF.js";import{I as r}from"./input-error-s7VXvdVn.js";import{a as H,B as a}from"./button-CUOcSF3l.js";import{I as i}from"./input-DTRL0anS.js";import{L as o}from"./label-CMVlQqZg.js";import{C as Z,b as ss,c as es,a as as}from"./card-B5j4ta9c.js";import{T as rs,a as is,b as T,c as n,d as os,e as l}from"./table-BxkHEX6I.js";import{B as u}from"./badge-BqVATA5I.js";import{D as U,f as ts,a as P,b as A,c as E}from"./dialog-Ccjli5pB.js";import{A as ns,D as ls,b as ds,c as cs,d as w}from"./app-layout-acI46LDg.js";import{P as ms}from"./plus-qF-BC0Hy.js";import{E as q}from"./eye-off-B1-rIEvu.js";import{E as F}from"./eye-C8W1EZRe.js";import{K as hs}from"./key-ih-egkag.js";import{T as ps}from"./trash-2-tcezDjdq.js";/* empty css            */import"./index-DzBhJDo2.js";import"./index-HkQZ_pMn.js";import"./app-logo-icon-CvOjhXRH.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],js=H("UserCheck",xs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],ws=H("UserX",us),fs=[{title:"Usuários",href:"/settings/users"}];function Rs({users:f,currentUser:g}){const[I,j]=x.useState(!1),[L,d]=x.useState(!1),[t,v]=x.useState(null),[c,y]=x.useState({password:!1,password_confirmation:!1}),{data:m,setData:h,post:R,processing:N,errors:p,reset:z}=D({name:"",email:"",password:"",password_confirmation:""}),{data:C,setData:_,patch:B,processing:S,errors:b,reset:M}=D({password:"",password_confirmation:""}),O=e=>{e.preventDefault(),R(route("users.store"),{onSuccess:()=>{z(),j(!1)}})},G=e=>{e.preventDefault(),t&&B(route("users.reset-password",t.id),{onSuccess:()=>{M(),d(!1),v(null)}})},K=e=>{const V=!e.email_verified_at;k.patch(route("users.update-status",e.id),{active:V},{preserveScroll:!0})},Q=e=>{confirm(`Tem certeza que deseja excluir o usuário "${e.name}"?`)&&k.delete(route("users.destroy",e.id),{preserveScroll:!0})},X=e=>{v(e),d(!0)},$=e=>new Date(e).toLocaleDateString("pt-BR");return s.jsxs(ns,{breadcrumbs:fs,children:[s.jsx(J,{title:"Gerenciar Usuários"}),s.jsx(W,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Y,{title:"Usuários",description:"Gerencie os usuários da sua empresa"}),s.jsxs(U,{open:I,onOpenChange:j,children:[s.jsx(ts,{asChild:!0,children:s.jsxs(a,{children:[s.jsx(ms,{className:"mr-2 h-4 w-4"}),"Novo Usuário"]})}),s.jsxs(P,{className:"sm:max-w-md",children:[s.jsx(A,{children:s.jsx(E,{children:"Criar Novo Usuário"})}),s.jsxs("form",{onSubmit:O,className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(o,{htmlFor:"name",children:"Nome"}),s.jsx(i,{id:"name",value:m.name,onChange:e=>h("name",e.target.value),required:!0,placeholder:"Nome completo"}),s.jsx(r,{message:p.name})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(o,{htmlFor:"email",children:"E-mail"}),s.jsx(i,{id:"email",type:"email",value:m.email,onChange:e=>h("email",e.target.value),required:!0,placeholder:"exemplo@empresa.com"}),s.jsx(r,{message:p.email})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(o,{htmlFor:"password",children:"Senha"}),s.jsxs("div",{className:"relative",children:[s.jsx(i,{id:"password",type:c.password?"text":"password",value:m.password,onChange:e=>h("password",e.target.value),required:!0,placeholder:"Senha"}),s.jsx(a,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>y(e=>({...e,password:!e.password})),children:c.password?s.jsx(q,{className:"h-4 w-4"}):s.jsx(F,{className:"h-4 w-4"})})]}),s.jsx(r,{message:p.password})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(o,{htmlFor:"password_confirmation",children:"Confirmar Senha"}),s.jsxs("div",{className:"relative",children:[s.jsx(i,{id:"password_confirmation",type:c.password_confirmation?"text":"password",value:m.password_confirmation,onChange:e=>h("password_confirmation",e.target.value),required:!0,placeholder:"Confirmar senha"}),s.jsx(a,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>y(e=>({...e,password_confirmation:!e.password_confirmation})),children:c.password_confirmation?s.jsx(q,{className:"h-4 w-4"}):s.jsx(F,{className:"h-4 w-4"})})]}),s.jsx(r,{message:p.password_confirmation})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(a,{type:"button",variant:"outline",onClick:()=>j(!1),children:"Cancelar"}),s.jsx(a,{type:"submit",disabled:N,children:N?"Criando...":"Criar Usuário"})]})]})]})]})]}),s.jsxs(Z,{children:[s.jsx(ss,{children:s.jsx(es,{children:"Lista de Usuários"})}),s.jsxs(as,{children:[s.jsxs(rs,{children:[s.jsx(is,{children:s.jsxs(T,{children:[s.jsx(n,{children:"Nome"}),s.jsx(n,{children:"E-mail"}),s.jsx(n,{children:"Status"}),s.jsx(n,{children:"Criado em"}),s.jsx(n,{className:"text-right",children:"Ações"})]})}),s.jsx(os,{children:f.data.map(e=>s.jsxs(T,{children:[s.jsx(l,{children:s.jsxs("div",{className:"font-medium",children:[e.name,e.is_super_admin&&s.jsx(u,{variant:"secondary",className:"ml-2",children:"Admin"}),e.id===g.id&&s.jsx(u,{variant:"outline",className:"ml-2",children:"Você"})]})}),s.jsx(l,{children:e.email}),s.jsx(l,{children:s.jsx(u,{variant:e.email_verified_at?"default":"destructive",children:e.email_verified_at?"Ativo":"Inativo"})}),s.jsx(l,{children:$(e.created_at)}),s.jsx(l,{className:"text-right",children:e.id!==g.id&&s.jsxs(ls,{children:[s.jsx(ds,{asChild:!0,children:s.jsx(a,{variant:"ghost",size:"sm",children:"Ações"})}),s.jsxs(cs,{align:"end",children:[s.jsx(w,{onClick:()=>K(e),children:e.email_verified_at?s.jsxs(s.Fragment,{children:[s.jsx(ws,{className:"mr-2 h-4 w-4"}),"Desativar"]}):s.jsxs(s.Fragment,{children:[s.jsx(js,{className:"mr-2 h-4 w-4"}),"Ativar"]})}),s.jsxs(w,{onClick:()=>X(e),children:[s.jsx(hs,{className:"mr-2 h-4 w-4"}),"Alterar Senha"]}),s.jsxs(w,{onClick:()=>Q(e),className:"text-red-600",children:[s.jsx(ps,{className:"mr-2 h-4 w-4"}),"Excluir"]})]})]})})]},e.id))})]}),f.data.length===0&&s.jsx("div",{className:"py-6 text-center text-muted-foreground",children:"Nenhum usuário encontrado."})]})]}),s.jsx(U,{open:L,onOpenChange:d,children:s.jsxs(P,{className:"sm:max-w-md",children:[s.jsx(A,{children:s.jsxs(E,{children:["Alterar Senha - ",t==null?void 0:t.name]})}),s.jsxs("form",{onSubmit:G,className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(o,{htmlFor:"new_password",children:"Nova Senha"}),s.jsx(i,{id:"new_password",type:"password",value:C.password,onChange:e=>_("password",e.target.value),required:!0,placeholder:"Nova senha"}),s.jsx(r,{message:b.password})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(o,{htmlFor:"new_password_confirmation",children:"Confirmar Nova Senha"}),s.jsx(i,{id:"new_password_confirmation",type:"password",value:C.password_confirmation,onChange:e=>_("password_confirmation",e.target.value),required:!0,placeholder:"Confirmar nova senha"}),s.jsx(r,{message:b.password_confirmation})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(a,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancelar"}),s.jsx(a,{type:"submit",disabled:S,children:S?"Alterando...":"Alterar Senha"})]})]})]})})]})})]})}export{Rs as default};
