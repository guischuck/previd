import{r as o,j as e,Q as B,t as d,S as N}from"./app-WLgdctHE.js";import{a as w,B as a}from"./button-C_hdWeJT.js";import{C as i,a as c,b as D,c as q,d as I}from"./card-B9ABilfG.js";import{I as V}from"./input-xcfB5pT_.js";import{A as R,B as y}from"./app-layout-DMq6fKxE.js";import{P as k}from"./plus-BIQDYzjL.js";import{S as T}from"./search-Dg-Z3FjQ.js";/* empty css            */import"./index-AgoEjcBu.js";import"./index-BND9CRu0.js";import"./app-logo-icon-OCgv-Ije.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],U=w("Grid3x3",G);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],F=w("List",A),Q=[{title:"Dashboard",href:"/dashboard"},{title:"Casos",href:"/cases"}];function le({cases:n,users:H,statuses:C,filters:S}){o.useEffect(()=>{p(n.data)},[n.data]);const[x,u]=o.useState(S.search||""),[l,p]=o.useState(n.data),[h,g]=o.useState("kanban"),[j,M]=o.useState({}),E=s=>{M(t=>({...t,[s]:!t[s]}))};o.useEffect(()=>{const s=t=>{const{caseId:r,progress:O,status:z}=t.detail;p($=>$.map(m=>m.id===r?{...m,status:z}:m))};return window.addEventListener("caseProgressUpdated",s),()=>{window.removeEventListener("caseProgressUpdated",s)}},[]);const f=s=>({pendente:"Pendente",em_coleta:"Em Coleta",protocolado:"Protocolado",concluido:"Concluído",rejeitado:"Rejeitado"})[s]||C[s]||s,b=s=>{switch(s){case"pendente":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"em_coleta":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"protocolado":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"concluido":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"arquivado":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},v=()=>{N.get("/cases",{search:x},{preserveState:!0})},L=s=>{s.key==="Enter"&&v()},P=(()=>{const s={pendente:{title:"Pendente",cases:[],color:"bg-yellow-50 border-yellow-200 dark:bg-yellow-900/20 dark:border-yellow-700"},em_coleta:{title:"Em Coleta",cases:[],color:"bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-700"},concluido:{title:"Concluído",cases:[],color:"bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-700"}};return l.forEach(t=>{t.status!=="arquivado"&&(t.status==="pendente"?s.pendente.cases.push(t):t.status==="em_coleta"?s.em_coleta.cases.push(t):t.status==="concluido"?s.concluido.cases.push(t):t.status==="protocolado"?s.em_coleta.cases.push(t):s.pendente.cases.push(t))}),s})();return e.jsxs(R,{breadcrumbs:Q,children:[e.jsx(B,{title:"Casos - Sistema Jurídico"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Casos"}),e.jsx("p",{className:"text-muted-foreground",children:"Gerencie os casos jurídicos dos clientes"})]}),e.jsx(d,{href:"/cases/create",children:e.jsxs(a,{children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"Novo Caso"]})})]}),e.jsx(i,{children:e.jsx(c,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(T,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 transform text-muted-foreground"}),e.jsx(V,{placeholder:"Buscar por nome do cliente...",value:x,onChange:s=>u(s.target.value),onKeyPress:L,className:"pl-10"})]}),e.jsx(a,{onClick:v,variant:"outline",children:"Buscar"}),e.jsx(a,{variant:"ghost",onClick:()=>{u(""),N.get("/cases",{},{preserveState:!0})},children:"Limpar busca"})]})})}),e.jsx(i,{children:e.jsx(c,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Modo de Visualização:"}),e.jsxs("div",{className:"flex rounded-lg border",children:[e.jsxs(a,{variant:h==="list"?"default":"ghost",size:"sm",onClick:()=>g("list"),className:"rounded-r-none",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Lista"]}),e.jsxs(a,{variant:h==="kanban"?"default":"ghost",size:"sm",onClick:()=>g("kanban"),className:"rounded-l-none",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Kanban"]})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[l.length," caso",l.length!==1?"s":""," encontrado",l.length!==1?"s":""]})]})})}),l&&l.filter(s=>s.status!=="arquivado").length>0?h==="list"?e.jsxs(i,{children:[e.jsxs(D,{children:[e.jsxs(q,{children:["Casos (",(n==null?void 0:n.total)||0,")"]}),e.jsx(I,{children:"Lista de todos os casos jurídicos cadastrados no sistema"})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-4",children:l.filter(s=>s.status!=="arquivado").map(s=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4 transition-colors hover:bg-accent hover:text-accent-foreground",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:s.client_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["CPF: ",s.client_cpf]})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:`rounded-full px-3 py-1.5 text-xs font-semibold tracking-wide uppercase ${b(s.status)} transition-all duration-200 hover:scale-105`,children:f(s.status)})})]}),e.jsx("div",{className:"mt-2 text-sm text-muted-foreground",children:e.jsxs("span",{children:["Criado em: ",new Date(s.created_at).toLocaleDateString("pt-BR")]})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(d,{href:`/cases/${s.id}/vinculos`,children:e.jsx(a,{variant:"outline",size:"sm",children:"Vínculos"})}),e.jsx(d,{href:`/cases/${s.id}`,children:e.jsx(a,{variant:"outline",size:"sm",children:"Ver"})}),e.jsx(d,{href:`/cases/${s.id}/edit`,children:e.jsx(a,{variant:"outline",size:"sm",children:"Editar"})})]})]},s.id))})})]}):e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:Object.entries(P).map(([s,t])=>e.jsxs("div",{className:"space-y-4",children:[e.jsx(i,{className:`${t.color} border-2`,children:e.jsx(c,{className:"p-4",children:e.jsxs("button",{onClick:()=>E(s),className:"w-full flex items-center justify-between hover:bg-white/50 dark:hover:bg-white/10 rounded-lg p-3 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${s==="pendente"?"bg-yellow-500":s==="em_coleta"?"bg-blue-500":"bg-green-500"}`}),e.jsx("h3",{className:"font-semibold text-lg text-gray-800 dark:text-gray-200",children:t.title})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"bg-white/80 dark:bg-gray-800/80 text-gray-700 dark:text-gray-300 px-3 py-1 rounded-full text-sm font-medium",children:t.cases.length}),e.jsx("div",{className:`transform transition-transform duration-200 ${j[s]?"rotate-180":"rotate-0"}`,children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})})}),e.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${j[s]?"max-h-none opacity-100":"max-h-0 opacity-0"}`,children:e.jsx("div",{className:"space-y-3 min-h-[200px]",children:t.cases.length>0?t.cases.map(r=>e.jsx(i,{className:"hover:shadow-lg dark:hover:shadow-gray-900/50 transition-all duration-200 hover:scale-[1.02] bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 line-clamp-2 mb-1",children:r.client_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["CPF: ",r.client_cpf]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:new Date(r.created_at).toLocaleDateString("pt-BR")}),e.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${b(r.status)}`,children:f(r.status)})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:[e.jsx(d,{href:`/cases/${r.id}`,className:"flex-1",children:e.jsx(a,{variant:"outline",size:"sm",className:"w-full text-xs hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:border-blue-300 dark:hover:border-blue-600",children:"Ver Detalhes"})}),e.jsx(d,{href:`/cases/${r.id}/edit`,children:e.jsx(a,{variant:"ghost",size:"sm",className:"text-xs hover:bg-gray-100 dark:hover:bg-gray-700",children:"Editar"})})]})]})})},r.id)):e.jsxs("div",{className:"text-center py-8 text-gray-400 dark:text-gray-500",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:e.jsx(y,{className:"w-6 h-6"})}),e.jsx("p",{className:"text-sm",children:"Nenhum caso nesta etapa"})]})})})]},s))})}):e.jsx(i,{children:e.jsxs(c,{className:"py-12 text-center",children:[e.jsx(y,{className:"mx-auto mb-4 h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mb-2 text-lg font-medium",children:"Nenhum caso encontrado"}),e.jsx("p",{className:"mb-4 text-muted-foreground",children:x?"Nenhum caso encontrado com os critérios de busca":"Comece criando seu primeiro caso jurídico"}),!x&&e.jsx(d,{href:"/cases/create",children:e.jsxs(a,{children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"Criar Primeiro Caso"]})})]})})]})]})}export{le as default};
