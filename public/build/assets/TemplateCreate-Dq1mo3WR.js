import{r as v,x as F,j as e,Q as D,t as f}from"./app-ByIhTPwz.js";import{B as l}from"./button-D42JWFCD.js";import{C as n,b as o,c as d,a as c}from"./card-CKXZzhI-.js";import{I}from"./input-BCJ9LsRF.js";import{L as i}from"./label-NLd7gjYY.js";import{T as b}from"./textarea-DJvt9bHM.js";import{A as P}from"./app-layout-Bpm5aqBZ.js";import{A as U}from"./arrow-left-CK0laoX8.js";import{P as L}from"./plus-UhxZh6NV.js";import{E as O}from"./eye-vT-1LExu.js";import{S as R}from"./save-Bg9MIrp4.js";/* empty css            */import"./index-BQV6tv38.js";import"./index-B0bzsaPC.js";import"./app-logo-icon-BU8CUpKl.js";function ee({categories:u,benefitTypes:j,canManageGlobal:N}){const[y,w]=v.useState(""),[C,m]=v.useState(!1),{data:r,setData:t,post:_,processing:g,errors:a}=F({name:"",category:"",benefit_type:"",description:"",content:"",variables:[],sections:[],is_active:!0,is_default:!1,is_global:!1}),k=s=>{s.preventDefault(),_(route("petition-templates.store"))},E=()=>{w(r.content),m(!0)},T=s=>{const x=/\{\{([^}]+)\}\}/g,p=[];let h;for(;(h=x.exec(s))!==null;)p.includes(h[1].trim())||p.push(h[1].trim());t("variables",p)},S=s=>{t("content",s),T(s)},A=[{title:"Templates",href:"/petition-templates"},{title:"Novo Template",href:"#"}];return e.jsxs(P,{breadcrumbs:A,children:[e.jsx(D,{title:"Criar Template de Petição"}),e.jsxs("div",{className:"space-y-4 p-4 sm:space-y-6 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 flex items-center gap-2",children:e.jsx(f,{href:route("petition-templates.index"),children:e.jsxs(l,{variant:"outline",size:"sm",children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Voltar"]})})}),e.jsxs("h1",{className:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white",children:[e.jsx(L,{className:"mr-2 inline-block"})," Criar Template de Petição"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Crie um novo template reutilizável para suas petições"})]}),e.jsx("div",{className:"flex flex-col gap-2 sm:flex-row",children:e.jsxs(l,{type:"button",variant:"outline",onClick:E,disabled:!r.content,children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Preview"]})})]}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs(n,{children:[e.jsx(o,{children:e.jsx(d,{children:"Informações Básicas"})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"name",children:"Nome do Template *"}),e.jsx(I,{id:"name",value:r.name,onChange:s=>t("name",s.target.value),placeholder:"Ex: Recurso de Aposentadoria por Idade",className:a.name?"border-red-500":"",required:!0}),a.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.name})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"category",children:"Categoria *"}),e.jsxs("select",{id:"category",value:r.category,onChange:s=>t("category",s.target.value),className:`w-full rounded-md border px-3 py-2 dark:border-gray-600 dark:bg-gray-700 ${a.category?"border-red-500":"border-gray-300"}`,required:!0,children:[e.jsx("option",{value:"",children:"Selecione uma categoria"}),u&&u.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]}),a.category&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.category})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"benefit_type",children:"Tipo de Benefício (Opcional)"}),e.jsxs("select",{id:"benefit_type",value:r.benefit_type,onChange:s=>t("benefit_type",s.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"Selecione um tipo de benefício"}),j&&j.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]}),a.benefit_type&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.benefit_type})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"description",children:"Descrição"}),e.jsx(b,{id:"description",value:r.description,onChange:s=>t("description",s.target.value),placeholder:"Descreva quando usar este template...",rows:3}),a.description&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:!!r.is_active,onChange:s=>t("is_active",s.target.checked),className:"rounded"}),e.jsx(i,{htmlFor:"is_active",children:"Template ativo"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_default",checked:!!r.is_default,onChange:s=>t("is_default",s.target.checked),className:"rounded"}),e.jsx(i,{htmlFor:"is_default",children:"Template padrão"})]}),N&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_global",checked:!!r.is_global,onChange:s=>t("is_global",s.target.checked),className:"rounded"}),e.jsx(i,{htmlFor:"is_global",children:"Template global (disponível para todas as empresas)"})]})]})]})]}),r.variables.length>0&&e.jsxs(n,{children:[e.jsx(o,{children:e.jsx(d,{children:"Variáveis Detectadas"})}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Use estas variáveis no conteúdo: ",e.jsx("code",{children:"{{nome_variavel}}"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.variables.map((s,x)=>e.jsx("span",{className:"inline-flex items-center rounded-md bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-700/10 dark:bg-blue-400/10 dark:text-blue-400 dark:ring-blue-400/30",children:s},x))})]})})]}),e.jsxs(n,{children:[e.jsx(o,{children:e.jsx(d,{children:"Dicas de Uso"})}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["• Use ",e.jsx("code",{children:"{{nome_cliente}}"})," para inserir o nome do cliente"]}),e.jsxs("p",{children:["• Use ",e.jsx("code",{children:"{{cpf_cliente}}"})," para inserir o CPF"]}),e.jsxs("p",{children:["• Use ",e.jsx("code",{children:"{{numero_caso}}"})," para inserir o número do caso"]}),e.jsxs("p",{children:["• Use ",e.jsx("code",{children:"{{tipo_beneficio}}"})," para inserir o tipo de benefício"]}),e.jsxs("p",{children:["• Use ",e.jsx("code",{children:"{{data_hoje}}"})," para inserir a data atual"]})]})})]})]}),e.jsxs(n,{children:[e.jsx(o,{children:e.jsx(d,{children:"Conteúdo do Template *"})}),e.jsx(c,{children:e.jsxs("div",{children:[e.jsx(b,{value:r.content,onChange:s=>S(s.target.value),placeholder:`Digite o conteúdo do template aqui... 

Exemplo:
EXCELENTÍSSIMO SENHOR JUIZ FEDERAL DA {{vara}} VARA FEDERAL DE {{cidade}}

{{nome_cliente}}, brasileiro, {{estado_civil}}, portador do CPF {{cpf_cliente}}, por intermédio de seu advogado que esta subscreve, vem, respeitosamente, à presença de Vossa Excelência, propor a presente

AÇÃO PREVIDENCIÁRIA

em face do INSTITUTO NACIONAL DO SEGURO SOCIAL - INSS, autarquia federal com sede em Brasília/DF...`,rows:15,className:`font-mono text-sm ${a.content?"border-red-500":""}`,required:!0}),a.content&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.content})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:justify-end",children:[e.jsx(f,{href:route("petition-templates.index"),children:e.jsx(l,{type:"button",variant:"outline",className:"w-full sm:w-auto",children:"Cancelar"})}),e.jsx(l,{type:"submit",disabled:g,className:"w-full sm:w-auto",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-solid border-current border-r-transparent"}),"Criando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Criar Template"]})})]})]}),C&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>m(!1),children:e.jsxs("div",{className:"max-h-[80vh] w-full max-w-4xl overflow-auto rounded-lg bg-white p-6 dark:bg-gray-800",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Preview do Template"}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>m(!1),children:"Fechar"})]}),e.jsx("div",{className:"prose max-w-none whitespace-pre-wrap rounded border bg-gray-50 p-4 font-mono text-sm dark:bg-gray-900",children:y})]})})]})]})}export{ee as default};
