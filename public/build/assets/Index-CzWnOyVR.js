import{r as N,j as e,Q,S as f}from"./app-WLgdctHE.js";import{A as $,F as J,X as se,U as ae}from"./app-layout-DMq6fKxE.js";import{c as p,B as n}from"./button-C_hdWeJT.js";import{I as le}from"./input-xcfB5pT_.js";import{C as m,b as x,c as h,a as u}from"./card-B9ABilfG.js";import{S as k,a as y,b as P,c as D,d as c}from"./select-Ctv1h0M_.js";import{B as Z}from"./badge-AZ2JMr6f.js";import{E as q,A as re}from"./AdvboxTaskModal-Dw8ISAGh.js";import{C as te}from"./circle-check-big-6MDnwIIt.js";import{C as de}from"./circle-alert-BaQQqpJU.js";import{C as ie}from"./calendar-BZipBzt8.js";import{F as ne}from"./filter-CkUuYQMp.js";import{S as ce}from"./search-Dg-Z3FjQ.js";import{P as K}from"./plus-BIQDYzjL.js";/* empty css            */import"./index-AgoEjcBu.js";import"./index-BND9CRu0.js";import"./app-logo-icon-OCgv-Ije.js";import"./index-xBcEKAQ3.js";import"./chevron-up-Bep2Q40x.js";import"./dialog-Ct19jM04.js";import"./loader-circle-BlgnF-Qf.js";const W=[{title:"Dashboard",href:"/dashboard"},{title:"Processos INSS",href:"/inss-processes"}];function Le({processos:a,stats:l,statusOptions:b,servicoOptions:C,filters:v,error:L}){var M;const[o,_]=N.useState(v.search||""),[r,S]=N.useState(v.status||"all"),[t,z]=N.useState(v.servico||"all"),[d,U]=N.useState(v.periodo||"all"),[Y,E]=N.useState(!1),[I,A]=N.useState(null),ee=()=>{f.get("/inss-processes",{search:o,status:r==="all"?"":r,servico:t==="all"?"":t,periodo:d==="all"?"":d},{preserveState:!0})},T=()=>{_(""),S("all"),z("all"),U("all"),f.get("/inss-processes")},w=s=>{console.log("filterByStatus chamado com status:",s),console.log("Estado atual selectedStatus:",r),S(s);const i={search:o,status:s==="all"?"":s,servico:t==="all"?"":t,periodo:d==="all"?"":d};console.log("Parâmetros enviados:",i),f.get("/inss-processes",i,{preserveState:!0})},O=s=>{switch((s==null?void 0:s.toUpperCase())||""){case"EM ANÁLISE":case"EM ANALISE":return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/20 dark:text-blue-300 dark:border-blue-700";case"EXIGÊNCIA":case"EXIGENCIA":return"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/20 dark:text-orange-300 dark:border-orange-700";case"CONCLUÍDA":case"CONCLUIDA":case"DEFERIDO":case"APROVADO":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/20 dark:text-green-300 dark:border-green-700";case"INDEFERIDO":case"REJEITADO":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/20 dark:text-red-300 dark:border-red-700";default:return"bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-900/20 dark:text-gray-300 dark:border-gray-700"}},F=s=>{if(!s)return"N/A";const i=s.toUpperCase();switch(i){case"EM ANÁLISE":case"EM ANALISE":return"EM ANÁLISE";case"EXIGÊNCIA":case"EXIGENCIA":return"EXIGÊNCIA";case"CONCLUÍDA":case"CONCLUIDA":return"CONCLUÍDA";default:return i}},G=s=>s?new Date(s).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",B=s=>{if(!s)return null;const i=new Date(s),j=new Date(i);return j.setDate(j.getDate()+30),j},X=s=>s.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"});return L?e.jsxs($,{breadcrumbs:W,children:[e.jsx(Q,{title:"Processos - PrevidIA"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-4 md:p-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Processos INSS"}),e.jsx("p",{className:"text-muted-foreground text-sm md:text-base",children:"Gerencie seus processos do INSS"})]})}),e.jsxs(m,{className:"p-8 text-center",children:[e.jsx(x,{children:e.jsx(h,{className:"text-red-600",children:"Erro ao carregar dados"})}),e.jsx(u,{children:e.jsx("p",{className:"text-muted-foreground",children:L})})]})]})]}):e.jsxs($,{breadcrumbs:W,children:[e.jsx(Q,{title:"Processos INSS"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-4 md:p-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Processos INSS"}),e.jsxs("p",{className:"text-muted-foreground text-sm md:text-base",children:["Gerencie seus processos do INSS - ",(l==null?void 0:l.total_processos)||0," processos encontrados"]})]})}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 md:grid-cols-4",children:[e.jsxs(m,{className:p("cursor-pointer transition-all duration-200 hover:shadow-md",r==="EM ANÁLISE"&&"ring-2 ring-blue-500"),onClick:()=>{console.log("Card Em Análise clicado!"),w("EM ANÁLISE")},children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-xs md:text-sm font-medium",children:"Em Análise"}),e.jsx(J,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(u,{children:[e.jsx("div",{className:"text-lg md:text-2xl font-bold",children:(l==null?void 0:l.processos_ativos)||0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Ver todos ➜"})]})]}),e.jsxs(m,{className:p("cursor-pointer transition-all duration-200 hover:shadow-md",r==="CONCLUÍDA"&&"ring-2 ring-green-500"),onClick:()=>{console.log("Card Concluída clicado!"),w("CONCLUÍDA")},children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-xs md:text-sm font-medium",children:"Concluída"}),e.jsx(te,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(u,{children:[e.jsx("div",{className:"text-lg md:text-2xl font-bold",children:(l==null?void 0:l.processos_concluidos)||0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Ver todos ➜"})]})]}),e.jsxs(m,{className:p("cursor-pointer transition-all duration-200 hover:shadow-md",r==="EXIGÊNCIA"&&"ring-2 ring-orange-500"),onClick:()=>{console.log("Card Exigência clicado!"),w("EXIGÊNCIA")},children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-xs md:text-sm font-medium",children:"Em Exigência"}),e.jsx(de,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(u,{children:[e.jsx("div",{className:"text-lg md:text-2xl font-bold",children:(l==null?void 0:l.processos_exigencia)||0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Ver todos ➜"})]})]}),e.jsxs(m,{className:p("transition-all duration-200 hover:shadow-md"),children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-xs md:text-sm font-medium",children:"Protocolados Hoje"}),e.jsx(ie,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(u,{children:e.jsx("div",{className:"text-lg md:text-2xl font-bold",children:(l==null?void 0:l.protocolados_hoje)||0})})]})]}),e.jsxs(m,{children:[e.jsx(x,{children:e.jsxs(h,{className:"flex items-center gap-2 text-sm md:text-base",children:[e.jsx(ne,{className:"h-4 w-4"}),"Filtros"]})}),e.jsx(u,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"space-y-2 lg:col-span-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Buscar"}),e.jsxs("div",{className:"relative",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(le,{placeholder:"Nome, CPF ou protocolo...",value:o,onChange:s=>_(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs(k,{value:r,onValueChange:S,children:[e.jsx(y,{children:e.jsx(P,{placeholder:"Todos os status"})}),e.jsxs(D,{children:[e.jsx(c,{value:"all",children:"Todos"}),b==null?void 0:b.map(s=>e.jsx(c,{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Serviço"}),e.jsxs(k,{value:t,onValueChange:z,children:[e.jsx(y,{children:e.jsx(P,{placeholder:"Todos os serviços"})}),e.jsxs(D,{children:[e.jsx(c,{value:"all",children:"Todos"}),C==null?void 0:C.map(s=>e.jsx(c,{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Período"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(k,{value:d,onValueChange:U,children:[e.jsx(y,{children:e.jsx(P,{placeholder:"Selecionar"})}),e.jsxs(D,{children:[e.jsx(c,{value:"all",children:"Todos"}),e.jsx(c,{value:"hoje",children:"Hoje"}),e.jsx(c,{value:"semana",children:"Esta semana"}),e.jsx(c,{value:"mes",children:"Este mês"}),e.jsx(c,{value:"trimestre",children:"Este trimestre"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{onClick:ee,className:"flex-1 sm:flex-none",children:"Filtrar"}),e.jsx(n,{onClick:T,variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(se,{className:"h-4 w-4"})})]})]})]})]})})]}),e.jsxs(m,{children:[e.jsx(x,{children:e.jsxs(h,{className:"flex items-center gap-2 text-sm md:text-base",children:[e.jsx(J,{className:"h-4 w-4"}),"Processos (",((M=a==null?void 0:a.data)==null?void 0:M.length)||0,")"]})}),e.jsx(u,{className:"p-0",children:a!=null&&a.data&&a.data.length>0?e.jsxs("div",{className:"space-y-0",children:[e.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 p-4 text-sm font-medium text-muted-foreground border-b bg-muted/30",children:[e.jsx("div",{className:"col-span-2",children:"PROTOCOLO"}),e.jsx("div",{className:"col-span-2",children:"CLIENTE"}),e.jsx("div",{className:"col-span-2",children:"SERVIÇO"}),e.jsx("div",{className:"col-span-2",children:"SITUAÇÃO"}),e.jsx("div",{className:"col-span-2",children:"ÚLTIMA ATUALIZAÇÃO"}),e.jsx("div",{className:"col-span-2 text-center",children:"AÇÕES"})]}),a.data.map((s,i)=>{var j,V,R,H;return e.jsxs("div",{className:p("md:grid md:grid-cols-12 gap-4 p-4 hover:bg-muted/50 transition-colors",i!==a.data.length-1&&"border-b"),children:[e.jsxs("div",{className:"md:hidden space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-mono text-sm font-medium",children:s.protocolo}),e.jsx("div",{className:"font-medium mt-1",children:s.nome}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["CPF: ",s.cpf]})]}),e.jsx(Z,{className:O(s.situacao),children:F(s.situacao)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Serviço:"})," ",s.servico]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Última atualização:"})," ",G(s.ultima_atualizacao)]}),(j=s.situacao)!=null&&j.toUpperCase().includes("EXIGÊNCIA")||(V=s.situacao)!=null&&V.toUpperCase().includes("EXIGENCIA")?(()=>{const g=B(s.ultima_atualizacao);return g?e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Prazo:"})," ",X(g)]}):null})():null]}),e.jsx("div",{className:"pt-2",children:e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(n,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",asChild:!0,title:"Ver no INSS",children:e.jsx("a",{href:`https://atendimento.inss.gov.br/tarefas/detalhar_tarefa/${s.protocolo}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(q,{className:"h-4 w-4 text-blue-600"})})}),e.jsx(n,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",onClick:()=>{A(s),E(!0)},title:"Adicionar no AdvBox",children:e.jsx(K,{className:"h-4 w-4 text-indigo-600"})})]})})]}),e.jsx("div",{className:"hidden md:block col-span-2",children:e.jsx("div",{className:"font-mono text-sm font-medium",children:s.protocolo})}),e.jsxs("div",{className:"hidden md:block col-span-2",children:[e.jsx("div",{className:"font-medium",children:s.nome}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["CPF: ",s.cpf]})]}),e.jsx("div",{className:"hidden md:block col-span-2",children:e.jsx("div",{className:"text-sm",children:s.servico})}),e.jsx("div",{className:"hidden md:block col-span-2",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:O(s.situacao),children:F(s.situacao)}),(R=s.situacao)!=null&&R.toUpperCase().includes("EXIGÊNCIA")||(H=s.situacao)!=null&&H.toUpperCase().includes("EXIGENCIA")?(()=>{const g=B(s.ultima_atualizacao);return g?e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Prazo: ",X(g)]}):null})():null]})}),e.jsx("div",{className:"hidden md:block col-span-2",children:e.jsx("div",{className:"text-sm",children:G(s.ultima_atualizacao)})}),e.jsx("div",{className:"hidden md:block col-span-2",children:e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(n,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",asChild:!0,title:"Ver no INSS",children:e.jsx("a",{href:`https://atendimento.inss.gov.br/tarefas/detalhar_tarefa/${s.protocolo}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(q,{className:"h-4 w-4 text-blue-600"})})}),e.jsx(n,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",onClick:()=>{A(s),E(!0)},title:"Adicionar no AdvBox",children:e.jsx(K,{className:"h-4 w-4 text-indigo-600"})})]})})]},s.id)}),a.last_page>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 p-4 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Página ",a.current_page," de ",a.last_page]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{onClick:()=>f.get("/inss-processes",{page:a.current_page-1,search:o,status:r==="all"?"":r,servico:t==="all"?"":t,periodo:d==="all"?"":d},{preserveState:!0}),variant:"outline",size:"sm",disabled:a.current_page===1,className:"w-24",children:"Anterior"}),e.jsx(n,{onClick:()=>f.get("/inss-processes",{page:a.current_page+1,search:o,status:r==="all"?"":r,servico:t==="all"?"":t,periodo:d==="all"?"":d},{preserveState:!0}),variant:"outline",size:"sm",disabled:a.current_page===a.last_page,className:"w-24",children:"Próxima"})]})]})]}):e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(ae,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nenhum processo encontrado"}),e.jsx("p",{className:"mb-4 text-muted-foreground",children:o||r!=="all"||t!=="all"||d!=="all"?"Nenhum processo encontrado com os filtros aplicados":"Nenhum processo encontrado com status: Em Análise, Em Exigência ou Concluída"}),(o||r!=="all"||t!=="all"||d!=="all")&&e.jsx(n,{onClick:T,variant:"outline",children:"Limpar filtros"})]})})]})]}),e.jsx(re,{isOpen:Y,onClose:()=>{E(!1),A(null)},andamento:I?{processo:{protocolo:I.protocolo,nome:I.nome}}:null})]})}export{Le as default};
